language: python
python:
  - 3.5
addons:
  apt:
    packages:
      - "pandoc"
services:
  - "mongodb"
sudo: false
cache: "pip"
install:
  - "pip install -r requirements.txt"
script:
  - "flake8 mongoengine_goodjson tests"
  - "radon cc -nc mongoengine_goodjson"
  - "tox"
after_success:
  - "coverage combine python27.coverage python35.coverage"
  - "coveralls"
  - "pandoc --from=markdown --to=rst -o README.rst README.md"
deploy:
  provider: "pypi"
  user:
    secure: 'f6Yeb49GA0K3uqd8wM/K5fl3X3kOdbYuILw7TgF35vL4kVS8uCqOzmryavdbYH7tEt3VUNfK4aZ75vkwm+U0eAgPigzSuTPKg/N1q+ASip9H6cVTI3FYoVZXAv3HlNMObvnjLHn+/eVnVOKUkenFtAMModaeIGheXLLuGVGeAN6cOxTS6M/VawYzGcJ9TwRxjkwOYJoy1bZkd0HAEFK/CFKt/ZUhOjsOuBOZTpFB21PBlTzovVY4itHD+kENtgtlVb+pIDJBOFvn60FfE99nqdqh46hClLue6NYZqVCIZcYVbLBSnQ2w63MzjjNAexWNkPTwV3q7sLD/JgrPD5Y6uw3nTzrFTSYGpOdHa78EHckYNo1dRsirc+FqnDQerer0rotUTc/R1UG9kp3Bzlv8WEbeMcPAfVIeWbuOOzqChG3c1JH01je9QDBvN8gOJXZmw2vS0Fac6KZLf1HLy4fFCHDgsKBKnyuGKHsClepHSPM7mbiAzRoos7/L2Kj+XHUrD1hhSWpmZb3lVNYpunvBbtyB/ri4TuxxG1PQmZK9taVEG00VD1fOWFXYl40ImJ2Pl0i3lrnbi1gbEsR0syESu2K7sqejQYMswrRyzuWmDN6RQSck/em+22ppmG14pTPTb99jyzkwbaeWrvyFifbAD+7zoKlL47YYKlcnHxJB9xM='
  password:
    secure: "dBDjAI4j8/T2JDjSrMa+dym54RGZow3tgS0M5mS8tw3PNPaUWugQIOm9VHl8tPC6EJUzmQlqqgsA9qVkSqxSC0A0WbID3xBawtUnTG770w3TMdWxuTr2XlzEquvAjKwqHNPlXLN/I3VLdcozTgjccvSOSdHCV11VlTo0p67tiG5QvzMIvf4uG6GsczryTOZTOT7kLbWOTXQ8wcifYOzLaLLFPkd+B11veTu5orUXWa4oGWXdla7M3CZJhQt7wEwW5K/+4AkhDtsSl0jthor9Fl/wxuuG8IcLcb6MlbAaAfCWBah6RPeVeNmWwirQOm6DdGH8TejPwsDoA9tvi61yaPWlCS5v4T+MyDqy/0U172CGnw7OmPfCKmvgit3caPcSJMjoTMqBq4OyZZEUgy0IRER5FABkZeTD/7WWYdwDuCGpxxVw9EZ7DhnTd/KYLVzm4Co0XjdTuWmtlYuDmUs5FUghL5l/mB20d/bl26IhFlD3T91Nlc41fMD+ZrjIGtMzCZowZA/1lG+hDZ7Lg8T1PSJ7g+aEtoZWKPWgGtDY0sZ2NhvjVtpym4IeVweucHagim7QAZx5EiYf/2NwSNklDsrSm4zwEvPY6kuIwypSgya1e3y9CAXJaqjHhyehP9LvruRVGAUM2W+mn2pGa1ivV+WwtMO85k/URgUiId0Vrbg="
  on:
    tags: true
